{% extends "base.html" %}

{% block titolo %}
{{titolo}}
{% endblock %}

{% block menu_sezione %}
{% endblock %}

{% block menu_macro_sezione %}
{% include "./0_menu_macro_sezione_mezzi.html" %}
{% endblock %}


{% block corpo %}

{% load static %}

<div>
    <table class="table table-striped table-sm">
        <thead class="table-light  sticky-top">
        <tr class="text-center">
            <th scope="col">Stato</th>
            <th scope="col">Tipologia</th>
            <th scope="col">Marca</th>
            <th scope="col">Modello</th>
            <th scope="col">Targa</th>
            <th scope="col">Matricola</th>
            <th scope="col">Dichiarazione CE Mezzo/Accessori</th>
            <th scope="col">Assicurazione</th>
            <th scope="col">RCT</th>
            <th scope="col">Libretto Circolazione</th>
            <th scope="col">Revisione</th>
            <th scope="col">Matricola INAIL</th>
            <th scope="col">Immatricolazione INAIL</th>
            <th scope="col">Libretto INAIL</th>
            <th scope="col">Verifica periodica</th>
            <th scope="col">Manuale Uso e Manutenzione</th>
            <th scope="col">Verifica SCC</th>
            <th scope="col">Badge AP scadenza</th>
            <th scope="col">Badge AP consegnato</th>
            <th scope="col">Faldone</th>
        </tr>
        </thead>
        <tbody>
        {% for mezzo in mezzi %}
        <tr>
            <td class="text-center"><i class="fa-solid fa-circle {{mezzo.stato}}"></i></td>
            <td>{{mezzo.get_tipologia_display}}</td>
            <td><a href="/admin/mezzi/mezzo/{{ mezzo.pk}}" target="_blank">{{mezzo.marca|upper}}</a></td>
            <td><a href="/admin/mezzi/mezzo/{{ mezzo.pk}}" target="_blank">{{mezzo.modello|upper}}</a></td>
            <td><a href="/admin/mezzi/mezzo/{{ mezzo.pk}}" target="_blank">{{mezzo.targa|default_if_none:""}}</a></td>
            <td><a href="/admin/mezzi/mezzo/{{ mezzo.pk}}" target="_blank">{{mezzo.matricola|default_if_none:""}}</a>
            </td>
            <td class="text-center">
                {% if mezzo.ce %}
                <a href="{% static ''%}{{mezzo.nome}}/ce.pdf" target="_blank">
                    <i class="fa-solid fa-circle-check verde"></i></a>
                {% endif %}
                {% if mezzo.ce_accessori %} /
                <a href="{% static ''%}{{mezzo.nome}}/ce_accessori.pdf" target="_blank">
                    <i class="fa-solid fa-circle-check verde"></i>
                </a>
                {% endif %}
            </td>
            <td class="text-center {{mezzo.assicurazione_ck}}">
                <a href="{% static ''%}{{mezzo.nome}}/assicurazione {{mezzo.assicurazione|date:"dmy"}}.pdf"
                target="_blank">
                {{mezzo.assicurazione|date:"d/m/y"}}
                </a>
            </td>
            <td class="text-center">{% if mezzo.rct_aziendale %}
                <i class="fa-solid fa-circle {{mezzo.rct_aziendale_ck}}"></i>
                {% endif %}
            </td>
            <td class="text-center">
                {% if mezzo.libretto %}
                <a href="{% static ''%}{{mezzo.nome}}/libretto {{mezzo.revisione|date:"dmy"}}.pdf" target="_blank">
                    <i class="fa-solid fa-circle-check verde"></i>
                </a>
                {% endif %}
            </td>
            <td class="text-center {{mezzo.revisione_ck}}">
                <a href="{% static ''%}{{mezzo.nome}}/libretto {{mezzo.revisione|date:"dmy"}}.pdf" target="_blank">
                {{mezzo.revisione|date:"d/m/y"}}
                </a>
            </td>
            <td class="text-center">{{mezzo.matricola_inail|default_if_none:""}}</td>
            <td class="text-center">
                <a href="{% static ''%}{{mezzo.nome}}/immatricolazione {{mezzo.immatricolazione|date:"dmy"}}.pdf"
                target="_blank">
                {{mezzo.immatricolazione|date:"d/m/y"}}
                </a>
            </td>
            <td class="text-center">
                {% if mezzo.libretto_inail %}
                <a href="{% static ''%}{{mezzo.nome}}/libretto_inail.pdf" target="_blank">
                    <i class="fa-solid fa-circle-check verde"></i>
                </a>
                {% endif %}
            </td>
            <td class="text-center {{mezzo.inail_ck}}">
<!--                <a href="{% static ''%}{{mezzo.nome}}/verifica_periodica {{mezzo.inail|date:"dmy"}}.pdf" target="_blank">-->
                {{mezzo.inail|date:"d/m/y"}}
                </a>
            </td>
            <td class="text-center">
                {% if mezzo.manuale %}
                <a href="{% static ''%}{{mezzo.nome}}/manuale.pdf" target="_blank">
                    <i class="fa-solid fa-circle-check verde"></i>
                </a>
                {% endif %}
            </td>
            <td class="text-center">
                {% if mezzo.scc_numero_verifica %}
                {{mezzo.scc_numero_verifica}}
                {% elif mezzo.scc_verificato%}
                <i class="fa-solid fa-circle-check verde"></i>
                {% elif mezzo.scc_verificato == False %}
                <i class="fa-solid fa-circle-xmark rosso"></i>
                {% endif %}
            </td>
            <td class="text-center">{{mezzo.scadenza_ap|default_if_none:""}}</td>
            <td class="text-center">
                {% if mezzo.consegnato_ap == True %}
                <i class="fa-solid fa-circle-check verde"></i>
                {% elif mezzo.consegnato_ap == False %}
                <i class="fa-solid fa-circle-xmark grigio"></i>
                {% endif %}
            </td>
            <td>{{mezzo.faldone|default_if_none:""}}</td>
        </tr>
        {% endfor %}
        </tbody>


    </table>
</div>
{% endblock %}

</div>


<!-- Optional JavaScript; choose one of the two! -->

<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

<!-- Option 2: Separate Popper and Bootstrap JS -->
<!--
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
-->

</body>
